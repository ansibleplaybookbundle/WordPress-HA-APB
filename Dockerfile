FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IHdvcmRwcmVzcy1oYS1hcGIKaW1hZ2U6IGFuc2libGVwbGF5Ym9v\
a2J1bmRsZS93b3JkcHJlc3MtaGEtYXBiCmRlc2NyaXB0aW9uOiBIaWdoIEF2YWlsYWJpbGl0eSBX\
b3JkcHJlc3MgQVBCCmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YTogCiAg\
ZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly93b3JkcHJlc3Mub3JnLwogIGxvbmdEZXNjcmlwdGlv\
bjogQW4gYXBiIHRoYXQgZGVwbG95cyBIaWdoIEF2YWlsYWJpbGl0eSBXb3JkcHJlc3MKICBkZXBl\
bmRlbmNpZXM6IFsncXVheS5pby9jb3Jlb3MvZXRjZDpsYXRlc3QnLCAnZG9ja2VyLmlvL3BlcmNv\
bmFsYWIvcGVyY29uYS14dHJhZGItY2x1c3Rlcjo1LjYnLCAnd29yZHByZXNzJ10KICBkaXNwbGF5\
TmFtZTogV29yZHByZXNzLUhBIChBUEIpCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNz\
OiBpY29uLXdvcmRwcmVzcwogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMuIgpw\
bGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95\
cyBIaWdoIEF2YWlsYWJpbGl0eSBXb3JkcHJlc3MKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRh\
OgogICAgICBkaXNwbGF5TmFtZTogRGVmYXVsdAogICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMg\
cGxhbiBwcm92aWRlcyBIaWdoIEF2YWlsYWJpbGl0eSBXb3JkcHJlc3MKICAgICAgY29zdDogJDAu\
MDAKICAgIHBhcmFtZXRlcnM6IAogICAgICAtIG5hbWU6IHJvb3RfcGFzc3dvcmQKICAgICAgICBk\
ZWZhdWx0OiBrOHNwYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBk\
YXRhYmFzZSByb290IHBhc3N3b3JkCiAgICAgIC0gbmFtZTogeHRyYWJhY2t1cF9wYXNzd29yZAog\
ICAgICAgIGRlZmF1bHQ6IGs4c3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IGJhY2t1cCBwYXNzd29yZAogICAgICAtIG5hbWU6IGNsdXN0ZXJfbmFtZQogICAgICAg\
IGRlZmF1bHQ6IHBlcmNvbmEKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogcGVy\
Y29uYSBjbHVzdGVyIG5hbWUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IGRh\
dGFiYXNlX3VzZXIKICAgICAgICBkZWZhdWx0OiByb290CiAgICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgICAgdGl0bGU6IGRhdGFiYXNlIHVzZXIgbmFtZQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAg\
ICAgIC0gbmFtZTogZGF0YWJhc2VfcGFzc3dvcmQKICAgICAgICBkZWZhdWx0OiBrOHNwYXNzd29y\
ZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBkYXRhYmFzZSB1c2VyIHBhc3N3\
b3JkCiAgICAgIC0gbmFtZTogZGF0YWJhc2VfcmVwbGljYXMKICAgICAgICBkZWZhdWx0OiAzCiAg\
ICAgICAgdHlwZTogaW50CiAgICAgICAgdGl0bGU6IG51bWJlciBvZiBkYXRhYmFzZSBub2Rlcwog\
ICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIC0gbmFtZTogbWluX3dvcmRwcmVzc19yZXBsaWNh\
cwogICAgICAgIGRlZmF1bHQ6IDUKICAgICAgICB0eXBlOiBpbnQKICAgICAgICB0aXRsZTogbWlu\
aW11bSB3b3JkcHJlc3MgcmVwbGljYXMKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5h\
bWU6IG1heF93b3JkcHJlc3NfcmVwbGljYXMKICAgICAgICBkZWZhdWx0OiAxMAogICAgICAgIHR5\
cGU6IGludAogICAgICAgIHRpdGxlOiBtYXhpbXVtIHdvcmRwcmVzcyByZXBsaWNhcwogICAgICAg\
IHJlcXVpcmVkOiBUcnVlCg=="
COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
