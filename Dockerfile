FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wLjAKbmFtZTogd29yZHByZXNzLWhhLWFwYgpkZXNjcmlwdGlvbjogSGlnaCBB\
dmFpbGFiaWxpdHkgV29yZHByZXNzIEFQQgpiaW5kYWJsZTogVHJ1ZQphc3luYzogb3B0aW9uYWwK\
bWV0YWRhdGE6IAogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vd29yZHByZXNzLm9yZy8KICBs\
b25nRGVzY3JpcHRpb246IEFuIGFwYiB0aGF0IGRlcGxveXMgSGlnaCBBdmFpbGFiaWxpdHkgV29y\
ZHByZXNzCiAgZGVwZW5kZW5jaWVzOiBbJ3F1YXkuaW8vY29yZW9zL2V0Y2Q6bGF0ZXN0JywgJ2Rv\
Y2tlci5pby9wZXJjb25hbGFiL3BlcmNvbmEteHRyYWRiLWNsdXN0ZXI6NS42JywgJ3dvcmRwcmVz\
cyddCiAgZGlzcGxheU5hbWU6IFdvcmRwcmVzcy1IQSAoQVBCKQogIGNvbnNvbGUub3BlbnNoaWZ0\
LmlvL2ljb25DbGFzczogaWNvbi13b3JkcHJlc3MKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVk\
IEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogVGhp\
cyBwbGFuIGRlcGxveXMgSGlnaCBBdmFpbGFiaWxpdHkgV29yZHByZXNzCiAgICBmcmVlOiBUcnVl\
CiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IERlZmF1bHQKICAgICAgbG9uZ0Rlc2Ny\
aXB0aW9uOiBUaGlzIHBsYW4gcHJvdmlkZXMgSGlnaCBBdmFpbGFiaWxpdHkgV29yZHByZXNzCiAg\
ICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAKICAgICAgLSBuYW1lOiByb290X3Bhc3N3\
b3JkCiAgICAgICAgZGVmYXVsdDogazhzcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgICB0aXRsZTogZGF0YWJhc2Ugcm9vdCBwYXNzd29yZAogICAgICAtIG5hbWU6IHh0cmFiYWNr\
dXBfcGFzc3dvcmQKICAgICAgICBkZWZhdWx0OiBrOHNwYXNzd29yZAogICAgICAgIHR5cGU6IHN0\
cmluZwogICAgICAgIHRpdGxlOiBiYWNrdXAgcGFzc3dvcmQKICAgICAgLSBuYW1lOiBjbHVzdGVy\
X25hbWUKICAgICAgICBkZWZhdWx0OiBwZXJjb25hCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgdGl0bGU6IHBlcmNvbmEgY2x1c3RlciBuYW1lCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAg\
ICAgLSBuYW1lOiBkYXRhYmFzZV91c2VyCiAgICAgICAgZGVmYXVsdDogcm9vdAogICAgICAgIHR5\
cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBkYXRhYmFzZSB1c2VyIG5hbWUKICAgICAgICByZXF1\
aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IGRhdGFiYXNlX3Bhc3N3b3JkCiAgICAgICAgZGVmYXVs\
dDogazhzcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogZGF0YWJh\
c2UgdXNlciBwYXNzd29yZAogICAgICAtIG5hbWU6IGRhdGFiYXNlX3JlcGxpY2FzCiAgICAgICAg\
ZGVmYXVsdDogMwogICAgICAgIHR5cGU6IGludAogICAgICAgIHRpdGxlOiBudW1iZXIgb2YgZGF0\
YWJhc2Ugbm9kZXMKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAtIG5hbWU6IG1pbl93b3Jk\
cHJlc3NfcmVwbGljYXMKICAgICAgICBkZWZhdWx0OiA1CiAgICAgICAgdHlwZTogaW50CiAgICAg\
ICAgdGl0bGU6IG1pbmltdW0gd29yZHByZXNzIHJlcGxpY2FzCiAgICAgICAgcmVxdWlyZWQ6IFRy\
dWUKICAgICAgLSBuYW1lOiBtYXhfd29yZHByZXNzX3JlcGxpY2FzCiAgICAgICAgZGVmYXVsdDog\
MTAKICAgICAgICB0eXBlOiBpbnQKICAgICAgICB0aXRsZTogbWF4aW11bSB3b3JkcHJlc3MgcmVw\
bGljYXMKICAgICAgICByZXF1aXJlZDogVHJ1ZQo="
COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

USER apb
